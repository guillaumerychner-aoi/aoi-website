<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Choisir mon abonnement - AOI Network</title>
    <meta name="description" content="Choisissez votre abonnement AOI Network et accédez au réseau des opérateurs immobiliers.">
    
    <!-- Favicons -->
    <link rel="icon" type="image/x-icon" href="/favicon.ico">
    <link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
    <link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png">
    <link rel="manifest" href="/site.webmanifest">
    <meta name="theme-color" content="#f97316">
    
    <!-- Open Graph / Facebook -->
    <meta property="og:type" content="website">
    <meta property="og:url" content="https://www.aoi-network.com/choix-abonnement.html">
    <meta property="og:title" content="Abonnements AOI Network">
    <meta property="og:description" content="Choisissez votre niveau d'accès au réseau des opérateurs immobiliers.">
    <meta property="og:image" content="https://www.aoi-network.com/og-image.png">
    <meta property="og:locale" content="fr_FR">
    <meta property="og:site_name" content="AOI Network">
    
    <!-- Twitter -->
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:title" content="Abonnements AOI Network">
    <meta name="twitter:description" content="Choisissez votre niveau d'accès au réseau des opérateurs immobiliers.">
    <meta name="twitter:image" content="https://www.aoi-network.com/og-image.png">
    
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&family=Playfair+Display:wght@600;700&display=swap" rel="stylesheet">
    <script src="https://unpkg.com/lucide@latest/dist/umd/lucide.js"></script>
    <style>
        :root{--orange-50:#fff7ed;--orange-100:#ffedd5;--orange-200:#fed7aa;--orange-300:#fdba74;--orange-400:#fb923c;--orange-500:#f97316;--orange-600:#ea580c;--orange-700:#c2410c;--gray-50:#f9fafb;--gray-100:#f3f4f6;--gray-200:#e5e7eb;--gray-300:#d1d5db;--gray-400:#9ca3af;--gray-500:#6b7280;--gray-600:#4b5563;--gray-700:#374151;--gray-800:#1f2937;--gray-900:#111827;--blue-500:#3b82f6;--blue-600:#2563eb;--green-500:#22c55e;--green-600:#16a34a;--gold:#C4A962}
        *{margin:0;padding:0;box-sizing:border-box}html{scroll-behavior:smooth}body{font-family:'Inter',-apple-system,BlinkMacSystemFont,sans-serif;color:var(--gray-800);line-height:1.6;overflow-x:hidden;background:var(--gray-50);max-width:100vw}
        .container{max-width:1200px;margin:0 auto;padding:0 24px}
        h1,h2,h3,h4{font-family:'Playfair Display',serif;font-weight:700;line-height:1.2}
        h1{font-size:clamp(2rem,4vw,3rem)}h2{font-size:clamp(1.5rem,3vw,2rem)}h3{font-size:1.25rem}
        p{color:var(--gray-600)}
        a{color:var(--orange-600);text-decoration:none}a:hover{text-decoration:underline}
        
        /* Header */
        header{position:fixed;top:0;left:0;right:0;z-index:1000;background:rgba(255,255,255,.95);backdrop-filter:blur(10px);border-bottom:1px solid var(--gray-100);box-shadow:0 4px 20px rgba(0,0,0,.08)}
        .header-inner{display:flex;align-items:center;justify-content:space-between;padding:16px 0}
        .logo{display:flex;align-items:center;gap:12px;text-decoration:none;color:var(--gray-900)}
        .logo-box{width:48px;height:48px;background:linear-gradient(135deg,var(--orange-500),var(--orange-600));border-radius:12px;display:flex;align-items:center;justify-content:center}
        .logo-aoi{color:#fff;font-family:'Inter',sans-serif;font-weight:800;font-size:1rem;letter-spacing:-0.5px}
        .logo-text{font-family:'Playfair Display',serif;font-size:1.5rem;font-weight:700}
        nav{display:flex;align-items:center;gap:8px}nav a{text-decoration:none;color:var(--gray-600);font-weight:500;padding:8px 16px;border-radius:8px;transition:all .2s ease}nav a:hover{color:var(--orange-600);background:var(--orange-50)}
        
        /* Page Header */
        .page-header{background:linear-gradient(180deg,var(--orange-50) 0%,var(--gray-50) 100%);padding:140px 0 60px;text-align:center}
        .page-header h1{color:var(--gray-900);margin-bottom:16px}
        .page-header h1 span{color:var(--orange-600)}
        .page-header p{font-size:1.125rem;max-width:600px;margin:0 auto}
        
        /* Recap */
        .recap-bar{background:#fff;border:1px solid var(--gray-200);border-radius:12px;padding:16px 24px;margin-bottom:40px;display:flex;align-items:center;gap:16px;flex-wrap:wrap}
        .recap-bar .icon{width:40px;height:40px;background:var(--green-500);border-radius:10px;display:flex;align-items:center;justify-content:center;flex-shrink:0}
        .recap-bar .icon i{width:20px;height:20px;color:#fff}
        .recap-bar .text{flex:1}
        .recap-bar .text strong{color:var(--gray-900)}
        .recap-bar .text span{color:var(--gray-500);font-size:0.9rem}
        .recap-bar a{color:var(--orange-600);font-size:0.9rem}
        
        /* Main Content */
        .main-content{padding:60px 0 100px}
        
        /* Pricing Cards */
        .pricing-grid{display:grid;grid-template-columns:repeat(3,1fr);gap:24px;margin-bottom:40px}
        
        .pricing-card{background:#fff;border-radius:24px;padding:32px;border:2px solid var(--gray-200);transition:all .3s ease;position:relative;display:flex;flex-direction:column}
        .pricing-card:hover{border-color:var(--gray-300);transform:translateY(-4px);box-shadow:0 12px 40px rgba(0,0,0,.1)}
        .pricing-card.popular{border-color:var(--gold);box-shadow:0 8px 30px rgba(196,169,98,.2)}
        .pricing-card.popular::before{content:'RECOMMANDÉ';position:absolute;top:-12px;left:50%;transform:translateX(-50%);background:var(--gold);color:#fff;font-size:0.75rem;font-weight:700;padding:4px 16px;border-radius:20px}
        
        .pricing-header{text-align:center;padding-bottom:24px;border-bottom:1px solid var(--gray-100);margin-bottom:24px}
        .pricing-header .icon{width:60px;height:60px;border-radius:16px;display:flex;align-items:center;justify-content:center;margin:0 auto 16px}
        .pricing-header .icon i{width:28px;height:28px}
        .pricing-card:nth-child(1) .pricing-header .icon{background:var(--orange-100)}
        .pricing-card:nth-child(1) .pricing-header .icon i{color:var(--orange-600)}
        .pricing-card:nth-child(2) .pricing-header .icon{background:#dbeafe}
        .pricing-card:nth-child(2) .pricing-header .icon i{color:var(--blue-500)}
        .pricing-card:nth-child(3) .pricing-header .icon{background:linear-gradient(135deg,var(--gold),#B8984A)}
        .pricing-card:nth-child(3) .pricing-header .icon i{color:#fff}
        
        .pricing-header h3{font-family:'Inter',sans-serif;font-weight:700;font-size:1.25rem;color:var(--gray-900);margin-bottom:8px}
        .pricing-header .subtitle{font-size:0.9rem;color:var(--gray-500);margin-bottom:16px}
        .pricing-header .price{font-size:2.5rem;font-weight:800;color:var(--gray-900)}
        .pricing-header .price span{font-size:1rem;font-weight:500;color:var(--gray-500)}
        .pricing-header .price-info{font-size:0.85rem;color:var(--gray-500);margin-top:4px}
        
        .pricing-features{flex:1;margin-bottom:24px}
        .pricing-features ul{list-style:none}
        .pricing-features li{display:flex;align-items:flex-start;gap:10px;padding:10px 0;font-size:0.9rem;color:var(--gray-700)}
        .pricing-features li i{width:18px;height:18px;color:var(--green-500);flex-shrink:0;margin-top:2px}
        .pricing-features li.disabled{color:var(--gray-400)}
        .pricing-features li.disabled i{color:var(--gray-300)}
        
        /* Billing Toggle for Partenaire */
        .billing-toggle{display:flex;gap:8px;margin-bottom:16px;justify-content:center}
        .billing-toggle button{padding:8px 16px;border:2px solid var(--gray-200);background:#fff;border-radius:8px;font-size:0.85rem;font-weight:500;cursor:pointer;transition:all .2s ease;font-family:'Inter',sans-serif}
        .billing-toggle button:hover{border-color:var(--gray-300)}
        .billing-toggle button.active{border-color:var(--blue-500);background:rgba(59,130,246,.05);color:var(--blue-600)}
        
        .btn{display:inline-flex;align-items:center;justify-content:center;gap:8px;padding:16px 32px;font-size:1rem;font-weight:600;text-decoration:none;border-radius:12px;transition:all .3s ease;cursor:pointer;border:none;font-family:'Inter',sans-serif;width:100%}
        .btn-primary{background:linear-gradient(135deg,var(--orange-500),var(--orange-600));color:#fff;box-shadow:0 4px 14px rgba(249,115,22,.4)}
        .btn-primary:hover{transform:translateY(-2px);box-shadow:0 6px 20px rgba(249,115,22,.5);text-decoration:none}
        .btn-secondary{background:var(--gray-900);color:#fff}
        .btn-secondary:hover{background:var(--gray-800);text-decoration:none}
        .btn-gold{background:linear-gradient(135deg,var(--gold),#B8984A);color:#fff;box-shadow:0 4px 14px rgba(196,169,98,.4)}
        .btn-gold:hover{transform:translateY(-2px);box-shadow:0 6px 20px rgba(196,169,98,.5);text-decoration:none}
        .btn i{width:20px;height:20px}
        .btn:disabled{opacity:0.6;cursor:not-allowed;transform:none!important}
        
        /* Info Box */
        .info-box{background:var(--orange-50);border:1px solid var(--orange-200);border-radius:12px;padding:20px;margin-top:40px;display:flex;align-items:flex-start;gap:16px}
        .info-box i{width:24px;height:24px;color:var(--orange-600);flex-shrink:0}
        .info-box p{font-size:0.9rem;color:var(--gray-700);margin:0}
        .info-box strong{color:var(--gray-900)}
        
        /* Footer */
        footer{background:var(--gray-900);color:#fff;padding:40px 0}
        .footer-simple{display:flex;justify-content:space-between;align-items:center;flex-wrap:wrap;gap:16px}
        .footer-simple p{color:var(--gray-400);font-size:0.85rem;margin:0}
        .footer-simple a{color:var(--gray-400);text-decoration:none;font-size:0.85rem;margin-left:24px}
        .footer-simple a:hover{color:var(--orange-400)}
        
        /* Responsive */
        @media(max-width:1024px){
            .pricing-grid{grid-template-columns:1fr}
            .pricing-card{max-width:400px;margin:0 auto}
            .pricing-card.popular{order:-1}
        }
        @media(max-width:768px){
            nav{display:none}
            .page-header{padding:100px 0 40px}
            .page-header h1{font-size:1.75rem}
            .main-content{padding:40px 0 60px}
            .recap-bar{flex-direction:column;text-align:center}
            .pricing-card{padding:24px}
            .info-box{flex-direction:column;text-align:center}
        }
    </style>
</head>
<body>
    <!-- Header -->
    <header>
        <div class="container">
            <div class="header-inner">
                <a href="/" class="logo">
                    <div class="logo-box"><span class="logo-aoi">AOI</span></div>
                    <span class="logo-text">Network</span>
                </a>
                <nav>
                    <a href="/#tarifs">Tarifs</a>
                    <a href="/#faq">FAQ</a>
                    <a href="/rejoindre.html">← Retour</a>
                </nav>
            </div>
        </div>
    </header>

    <!-- Page Header -->
    <section class="page-header">
        <div class="container">
            <h1>Choisissez votre <span>abonnement</span></h1>
            <p>Sélectionnez la formule adaptée à votre profil et commencez à développer votre activité avec AOI Network.</p>
        </div>
    </section>

    <!-- Main Content -->
    <section class="main-content">
        <div class="container">
            <!-- Recap Bar -->
            <div class="recap-bar" id="recapBar">
                <div class="icon"><i data-lucide="user-check"></i></div>
                <div class="text">
                    <strong id="recapName">Chargement...</strong><br>
                    <span id="recapCompany"></span>
                </div>
                <a href="/rejoindre.html">Modifier mes informations</a>
            </div>
            
            <!-- Pricing Grid -->
            <div class="pricing-grid">
                <!-- Niveau 1: Accès Initial -->
                <div class="pricing-card">
                    <div class="pricing-header">
                        <div class="icon"><i data-lucide="user"></i></div>
                        <h3>Accès Initial</h3>
                        <p class="subtitle">Pour découvrir le réseau</p>
                        <p class="price">64€<span>/mois HT</span></p>
                        <p class="price-info">76,80€ TTC • Engagement 12 mois</p>
                    </div>
                    <div class="pricing-features">
                        <ul>
                            <li><i data-lucide="check"></i>Bibliothèque documentaire</li>
                            <li><i data-lucide="check"></i>MasterClass et formations</li>
                            <li><i data-lucide="check"></i>Accès aux actualités du réseau</li>
                            <li class="disabled"><i data-lucide="x"></i>Annuaire des membres</li>
                            <li class="disabled"><i data-lucide="x"></i>Messagerie interne</li>
                            <li class="disabled"><i data-lucide="x"></i>Publication de projets SEP</li>
                            <li class="disabled"><i data-lucide="x"></i>Création d'opportunités</li>
                        </ul>
                    </div>
                    <button class="btn btn-secondary" data-plan="niveau1" data-price="7680">
                        <i data-lucide="arrow-right"></i>
                        Choisir ce niveau
                    </button>
                </div>
                
                <!-- Niveau 2: Partenaire Métier -->
                <div class="pricing-card">
                    <div class="pricing-header">
                        <div class="icon"><i data-lucide="briefcase"></i></div>
                        <h3>Partenaire Métier</h3>
                        <p class="subtitle">Pour les prestataires</p>
                        <div class="billing-toggle">
                            <button class="active" data-billing="monthly">Mensuel</button>
                            <button data-billing="yearly">Annuel</button>
                        </div>
                        <p class="price" id="partenairePrice">329€<span>/mois HT</span></p>
                        <p class="price-info" id="partenairePriceInfo">394,80€ TTC • Engagement 12 mois</p>
                    </div>
                    <div class="pricing-features">
                        <ul>
                            <li><i data-lucide="check"></i>Bibliothèque documentaire</li>
                            <li><i data-lucide="check"></i>MasterClass et formations</li>
                            <li><i data-lucide="check"></i>Annuaire complet des membres</li>
                            <li><i data-lucide="check"></i>Messagerie interne illimitée</li>
                            <li><i data-lucide="check"></i>Réception d'opportunités</li>
                            <li><i data-lucide="check"></i>Candidature aux missions</li>
                            <li class="disabled"><i data-lucide="x"></i>Publication de projets SEP</li>
                        </ul>
                    </div>
                    <button class="btn btn-primary" data-plan="niveau2" data-price="39480" data-billing="monthly">
                        <i data-lucide="arrow-right"></i>
                        Choisir ce niveau
                    </button>
                </div>
                
                <!-- Niveau 3: Co-Opérateur -->
                <div class="pricing-card popular">
                    <div class="pricing-header">
                        <div class="icon"><i data-lucide="crown"></i></div>
                        <h3>Co-Opérateur</h3>
                        <p class="subtitle">Pour les opérateurs confirmés</p>
                        <p class="price">5 990€<span>/an HT</span></p>
                        <p class="price-info">7 188€ TTC • Engagement 12 mois</p>
                    </div>
                    <div class="pricing-features">
                        <ul>
                            <li><i data-lucide="check"></i>Tout le niveau Partenaire</li>
                            <li><i data-lucide="check"></i><strong>Publication de projets SEP</strong></li>
                            <li><i data-lucide="check"></i><strong>Création d'opportunités</strong></li>
                            <li><i data-lucide="check"></i>Recherche de co-investisseurs</li>
                            <li><i data-lucide="check"></i>Déclaration de partenariats</li>
                            <li><i data-lucide="check"></i>Système d'avis et réputation</li>
                            <li><i data-lucide="check"></i>Support prioritaire</li>
                        </ul>
                    </div>
                    <button class="btn btn-gold" data-plan="niveau3" data-price="718800">
                        <i data-lucide="crown"></i>
                        Devenir Co-Opérateur
                    </button>
                </div>
            </div>
            
            <!-- Info Box -->
            <div class="info-box">
                <i data-lucide="info"></i>
                <p>
                    <strong>Commissions sur les opérations :</strong> En plus de l'abonnement, des commissions s'appliquent sur les affaires conclues via le réseau : 
                    500€ HT par prestation réalisée • 4,5% du montant pour les SEP (minimum 5 000€ HT).
                    <a href="/cgv.html" target="_blank">Voir les CGV</a>
                </p>
            </div>
        </div>
    </section>

    <!-- Footer -->
    <footer>
        <div class="container">
            <div class="footer-simple">
                <p>© 2026 AOI Network - Alliance des Opérateurs Immobiliers</p>
                <div>
                    <a href="/mentions-legales.html">Mentions légales</a>
                    <a href="/cgv.html">CGV</a>
                </div>
            </div>
        </div>
    </footer>

    <script>
        lucide.createIcons();
        
        // Get stored form data
        const formData = JSON.parse(sessionStorage.getItem('aoiFormData') || '{}');
        
        // Update recap bar
        if (formData.prenom && formData.nom) {
            document.getElementById('recapName').textContent = `${formData.prenom} ${formData.nom}`;
            document.getElementById('recapCompany').textContent = formData.societe || '';
        } else {
            // No data, redirect back
            // window.location.href = '/rejoindre.html';
            document.getElementById('recapName').textContent = 'Visiteur';
            document.getElementById('recapCompany').textContent = 'Données non renseignées';
        }
        
        // Billing toggle for Partenaire Métier
        const billingButtons = document.querySelectorAll('.billing-toggle button');
        const partenaireBtn = document.querySelector('[data-plan="niveau2"]');
        const partenairePrice = document.getElementById('partenairePrice');
        const partenairePriceInfo = document.getElementById('partenairePriceInfo');
        
        billingButtons.forEach(btn => {
            btn.addEventListener('click', function() {
                billingButtons.forEach(b => b.classList.remove('active'));
                this.classList.add('active');
                
                const billing = this.dataset.billing;
                if (billing === 'yearly') {
                    partenairePrice.innerHTML = '3 620€<span>/an HT</span>';
                    partenairePriceInfo.textContent = '4 344€ TTC • 1 mois offert';
                    partenaireBtn.dataset.price = '434400';
                    partenaireBtn.dataset.billing = 'yearly';
                } else {
                    partenairePrice.innerHTML = '329€<span>/mois HT</span>';
                    partenairePriceInfo.textContent = '394,80€ TTC • Engagement 12 mois';
                    partenaireBtn.dataset.price = '39480';
                    partenaireBtn.dataset.billing = 'monthly';
                }
            });
        });
        
        // Plan selection buttons
        const planButtons = document.querySelectorAll('[data-plan]');
        
        planButtons.forEach(btn => {
            btn.addEventListener('click', async function() {
                const plan = this.dataset.plan;
                const price = this.dataset.price;
                const billing = this.dataset.billing || 'yearly';
                
                // Show loading
                const originalText = this.innerHTML;
                this.innerHTML = '<i data-lucide="loader-2" class="animate-spin"></i> Redirection...';
                this.disabled = true;
                lucide.createIcons();
                
                // Add plan info to form data
                formData.plan = plan;
                formData.billing = billing;
                
                try {
                    // Call the API to create checkout session
                    const response = await fetch('https://aoi-extranet.vercel.app/api/subscription/register-checkout', {
                        method: 'POST',
                        headers: {
                            'Content-Type': 'application/json'
                        },
                        body: JSON.stringify({
                            plan: plan,
                            billing: billing,
                            userData: formData
                        })
                    });
                    
                    const data = await response.json();
                    
                    if (data.url) {
                        window.location.href = data.url;
                    } else {
                        throw new Error(data.error || 'Erreur lors de la création de la session');
                    }
                } catch (error) {
                    alert('Une erreur est survenue. Veuillez réessayer ou nous contacter.');
                    this.innerHTML = originalText;
                    this.disabled = false;
                    lucide.createIcons();
                }
            });
        });
        
        // Animation for spinner
        const style = document.createElement('style');
        style.textContent = '.animate-spin { animation: spin 1s linear infinite; } @keyframes spin { from { transform: rotate(0deg); } to { transform: rotate(360deg); } }';
        document.head.appendChild(style);
    </script>
</body>
</html>
